<div class="container">
    <h2>Person Reactive Form</h2>

    <form [formGroup]="person" (ngSubmit)="onSubmit()">

        <div class="form-group">

            <label for="name">Name</label>
            <input type="text" id="name" class="form-control" formControlName="name" required />

            <div *ngIf="name && name.invalid && (name.dirty || name.touched)" class="alert alert-danger">
                <div *ngIf="name && name.errors?.required">
                    Name is required.
                </div>
                <div *ngIf="name && name.errors?.minlength">
                    Name must be at least 4 characters long.
                </div>
            </div>
        </div>
        
        <div class="form-group">
            <label for="emailAddress">Email Address</label>
            <input type="email" formControlName="emailAddress" class="form-control" name="emailAddress" id="emailAddress">
            <div *ngIf="emailAddress && emailAddress.invalid && (emailAddress.dirty || emailAddress.touched)" class="alert alert-danger">
                <div *ngIf="emailAddress && emailAddress.errors?.required">
                    Email Address is required.
                </div>
                <!-- <div *ngIf="emailAddress && emailAddress.errors?.email">
                    Invalid email address.
                </div> -->
            </div>
        </div>
        <div class="form-group">
            <label for="dob">Date Of Birth</label>
            <input type="date" formControlName="dateOfBirth" class="form-control" name="dob" id="dob">
            <div *ngIf="dateOfBirth && dateOfBirth.invalid && (dateOfBirth.dirty || dateOfBirth.touched)" class="alert alert-danger">
                Date of birth is required.
            </div>
        </div>

        <div class="form-group">
            <label for="experience">Experience</label><small> in years</small>
            <input type="number" class="form-control" min="1" max="150" formControlName="yearsOfExperience" name="age" id="age">
            <div *ngIf="yearsOfExperience && yearsOfExperience.invalid && (yearsOfExperience.touched || yearsOfExperience.dirty)" class="alert alert-danger">
                <div *ngIf="yearsOfExperience && yearsOfExperience.errors?.required">
                    Experience is required.
                </div>
                <div *ngIf="yearsOfExperience && yearsOfExperience.errors?.min">
                    Experience should be greater than 1.
                </div>
                <div *ngIf="yearsOfExperience && yearsOfExperience.errors?.max">
                    Experience should be less than or equal to 150.
                </div>
            </div>
        </div>
<!-- <ol>
    <li *ngFor="let skill of skills | async">
        {{skill.name}}
    </li>
</ol> -->

        <div class="form-group">
            <label for="gender">Gender</label><br />
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" formControlName="gender" value="Male" id="malerbtn">
                <label class="form-check-label" for="malerbtn">
                    Male
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" formControlName="gender" value="Female" id="female"
                    checked>
                <label class="form-check-label" for="female">
                    Female
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" formControlName="gender" value="Other" id="other" checked>
                <label class="form-check-label" for="other">
                    Other
                </label>
            </div>
        </div>
        <div class="form-group">
            <label for="country">Country</label>
            <select class="form-select" id="country" formControlName="country" aria-label="Country">
               <option *ngFor="let country of countries" [ngValue]="country">
                    {{country}}
                </option>
              </select>
        </div>

<div class="form-group">
    <label>Skills</label> <br />
    <div class="form-check">
        <label class="form-check-label" style="width: 100%;" formArrayName="skills"
            *ngFor="let skill of skillsArray.controls; let i = index">
            <input class="form-check-input" type="checkbox" [formControlName]="i"
                (change)="handleChange(skillsData[i].id, $event)">
            {{skillsData[i].name}}
        </label>
    </div>
</div>
        <button type="submit" [disabled]="!person.valid" class="btn btn-primary" style="margin-top: 2%;">Submit</button>
    </form>
</div>